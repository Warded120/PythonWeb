{% load static %}
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Acme ‚Äì –î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤{% endblock %}</title>
    {% include 'includes/styles.html' %}
    {% block extra_head %}{% endblock %}
</head>
<body>
<header>
    <div class="auth-links">
        {% if user.is_authenticated %}
            {% if user.role == "user" %}
                <a href="{% url 'user_home' %}">
                    <span>–ü—Ä–∏–≤—ñ—Ç, {{ user.username }}!</span>
                </a>
            {% elif user.role == "admin" %}
                <a href="{% url 'admin_home' %}">
                    <span>–ü—Ä–∏–≤—ñ—Ç, {{ user.username }}!</span>
                </a>
            {% endif %}
            <a href="{% url 'logout' %}">–í–∏—Ö—ñ–¥</a>
        {% else %}
            <a href="{% url 'login' %}">–£–≤—ñ–π—Ç–∏</a>
            <a href="{% url 'register' %}">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</a>
        {% endif %}
        <a href="#" id="cart-button" class="cart-link">
            üõí –ö–æ—à–∏–∫ (<span id="cart-count">{{ request.session.cart|length|default:"0" }}</span>)
        </a>
    </div>
    <div class="header-content">
        <h1>Acme</h1>
    </div>
</header>

<main>
    {% block content %}
    {% endblock %}
</main>

<!-- Cart Modal -->
<div id="cart-modal">
    <div class="cart-header">
        <h3>–ö–æ—à–∏–∫</h3>
        <button id="close-cart" class="close-btn">&times;</button>
    </div>
    <ul id="cart-items">
        {% if request.session.cart %}
            {% for key, item in request.session.cart.items %}
                <li class="cart-item">
                    <div class="item-info">
                        <strong>{{ item.name }}</strong>
                        <span class="item-details">{{ item.quantity }} –∫–≥ ‚Äî {{ item.price }} –≥—Ä–Ω</span>
                    </div>
                    <form method="post" action="{% url 'remove_from_cart' key %}" class="remove-form">
                        {% csrf_token %}
                        <button type="submit" class="remove-btn">‚ùå</button>
                    </form>
                </li>
            {% endfor %}
        {% else %}
            <li class="empty-cart">–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</li>
        {% endif %}
    </ul>

    {% if request.session.cart %}
        <form method="post" action="{% url 'checkout' %}" class="checkout-form">
            {% csrf_token %}
            <input type="text" name="address" placeholder="–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏" required>
            <input type="text" name="phone" placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É" required>
            <button type="submit" class="checkout-btn">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –ø–æ–∫—É–ø–∫—É</button>
        </form>
    {% endif %}
</div>

<!-- Message notification -->
<div id="message"></div>

<footer>
    <p>&copy; 2025 Acme. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
</footer>

{% include 'includes/scripts.html' %}
</body>
</html>